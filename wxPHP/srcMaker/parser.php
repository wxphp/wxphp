<?
	$defConsts = array(
				"wxSP_3D"				=>1
				,"wxSP_3DSASH"			=>1
				,"wxSP_3DBORDER"		=>1
				,"wxSP_BORDER"			=>1
				,"wxSP_NOBORDER"		=>1
				,"wxSP_NO_XP_THEME"		=>1
				,"wxSP_PERMIT_UNSPLIT"	=>1
				,"wxSP_LIVE_UPDATE"		=>1
				,"wxHORIZONTAL"		=>1
				,"wxVERTICAL"		=>1
				,"wxTOP"		=>1
				,"wxBOTTOM"		=>1
				,"wxLEFT"		=>1
				,"wxRIGHT"		=>1
				,"wxALL"		=>1
				,"wxEXPAND"		=>1
				,"wxSHAPED"		=>1
				,"wxFIXED_MINSIZE"		=>1
				,"wxALIGN_CENTER"		=>1
				,"wxALIGN_CENTRE"		=>1
				,"wxALIGN_LEFT"		=>1
				,"wxALIGN_RIGHT"		=>1
				,"wxALIGN_TOP"		=>1
				,"wxALIGN_BOTTOM"		=>1
				,"wxALIGN_CENTER_VERTICAL"		=>1
				,"wxALIGN_CENTRE_VERTICAL"		=>1
				,"wxALIGN_CENTER_HORIZONTAL"		=>1
				,"wxALIGN_CENTRE_HORIZONTAL"		=>1
				,"wxGA_HORIZONTAL"		=>1
				,"wxGA_VERTICAL"		=>1
				,"wxBU_LEFT"		=>1
				,"wxBU_TOP"		=>1
				,"wxBU_RIGHT"		=>1
				,"wxBU_BOTTOM"		=>1
				,"wxBU_EXACTFIT"		=>1
				,"wxNO_BORDER"		=>1
				,"wxBITMAP_TYPE_BMP"		=>1
				,"wxBITMAP_TYPE_BMP_RESOURCE"		=>1
				,"wxBITMAP_TYPE_PICT_RESOURCE"		=>1
				,"wxBITMAP_TYPE_GIF"		=>1
				,"wxBITMAP_TYPE_XBM"		=>1
				,"wxBITMAP_TYPE_XPM"		=>1
				,"wxCAL_SUNDAY_FIRST"		=>1
				,"wxCAL_MONDAY_FIRST"		=>1
				,"wxCAL_SHOW_HOLIDAYS"		=>1
				,"wxCAL_NO_YEAR_CHANGE"		=>1
				,"wxCAL_NO_MONTH_CHANGE"		=>1
				,"wxCAL_SHOW_SURROUNDING_WEEKS"		=>1
				,"wxCAL_SEQUENTIAL_MONTH_SELECTION"		=>1
				,"wxCHK_2STATE"		=>1
				,"wxCHK_3STATE"		=>1
				,"wxCHK_ALLOW_3RD_STATE_FOR_USER"		=>1
				,"wxTB_FLAT"		=>1
				,"wxTB_DOCKABLE"		=>1
				,"wxTB_HORIZONTAL"		=>1
				,"wxTB_VERTICAL"		=>1
				,"wxTB_TEXT"		=>1
				,"wxTB_NOICONS"		=>1
				,"wxTB_NODIVIDER"		=>1
				,"wxTB_NOALIGN"		=>1
				,"wxTB_HORZ_LAYOUT"		=>1
				,"wxTB_HORZ_TEXT"		=>1
				,"wxTB_NO_TOOLTIPS"		=>1
				,"wxTB_BOTTOM"		=>1
				,"wxTB_RIGHT"		=>1
				,"wxLC_LIST"		=>1
				,"wxLC_REPORT"		=>1
				,"wxLC_VIRTUAL"		=>1
				,"wxLC_ICON"		=>1
				,"wxLC_SMALL_ICON"		=>1
				,"wxLC_ALIGN_TOP"		=>1
				,"wxLC_ALIGN_LEFT"		=>1
				,"wxLC_AUTOARRANGE"		=>1
				,"wxLC_EDIT_LABELS"		=>1
				,"wxLC_NO_HEADER"		=>1
				,"wxLC_SINGLE_SEL"		=>1
				,"wxLC_SORT_ASCENDING"		=>1
				,"wxLC_SORT_DESCENDING"		=>1
				,"wxLC_HRULES"		=>1
				,"wxLC_VRULES"		=>1
				,"wxEVT_COMMAND_TREE_BEGIN_DRAG"=>1
				,"wxEVT_COMMAND_TREE_BEGIN_RDRAG"=>1
				,"wxEVT_COMMAND_TREE_BEGIN_LABEL_EDIT"=>1
				,"wxEVT_COMMAND_TREE_END_LABEL_EDIT"=>1
				,"wxEVT_COMMAND_TREE_DELETE_ITEM"=>1
				,"wxEVT_COMMAND_TREE_GET_INFO"=>1
				,"wxEVT_COMMAND_TREE_SET_INFO"=>1
				,"wxEVT_COMMAND_TREE_ITEM_EXPANDED"=>1
				,"wxEVT_COMMAND_TREE_ITEM_EXPANDING"=>1
				,"wxEVT_COMMAND_TREE_ITEM_COLLAPSED"=>1
				,"wxEVT_COMMAND_TREE_ITEM_COLLAPSING"=>1
				,"wxEVT_COMMAND_TREE_SEL_CHANGED"=>1
				,"wxEVT_COMMAND_TREE_SEL_CHANGING"=>1
				,"wxEVT_COMMAND_TREE_KEY_DOWN"=>1
				,"wxEVT_COMMAND_TREE_ITEM_ACTIVATED"=>1
				,"wxEVT_COMMAND_TREE_ITEM_RIGHT_CLICK"=>1
				,"wxEVT_COMMAND_TREE_ITEM_MIDDLE_CLICK"=>1
				,"wxEVT_COMMAND_TREE_END_DRAG"=>1
				,"wxEVT_COMMAND_TREE_STATE_IMAGE_CLICK"=>1
				,"wxEVT_COMMAND_TREE_ITEM_GETTOOLTIP"=>1
				,"wxEVT_COMMAND_TREE_ITEM_MENU"=>1
				,"wxEVT_SIZE"=>1
				,"wxEVT_COMMAND_MENU_SELECTED"=>1
				,"wxEVT_COMMAND_COMBOBOX_SELECTED" => 1
				,"wxEVT_COMMAND_TEXT_UPDATED" => 1
				,"wxEVT_COMMAND_TEXT_ENTER" => 1
				,"wxEVT_COMMAND_TEXT_UPDATED" => 1
				,"wxEVT_COMMAND_TEXT_ENTER" => 1
				,"wxEVT_COMMAND_CHECKLISTBOX_TOGGLED"=>1
				,"wxEVT_COMMAND_CHOICE_SELECTED" => 1
				,"wxEVT_COMMAND_CHECKBOX_CLICKED" => 1
				,"wxEVT_CALENDAR_SEL_CHANGED" => 1
				,"wxEVT_CALENDAR_DAY_CHANGED" => 1
				,"wxEVT_CALENDAR_MONTH_CHANGED" => 1
				,"wxEVT_CALENDAR_YEAR_CHANGED" => 1
				,"wxEVT_CALENDAR_DOUBLECLICKED" => 1
				,"wxEVT_CALENDAR_WEEKDAY_CLICKED" => 1
				,"wxEVT_COMMAND_TOGGLEBUTTON_CLICKED"=>1
				,"wxEVT_COMMAND_BUTTON_CLICKED"=>1
				,"wxEVT_COMMAND_LISTBOX_DOUBLECLICKED"=>1
				,"wxEVT_COMMAND_LIST_BEGIN_DRAG"=>1
				,"wxEVT_COMMAND_LIST_BEGIN_RDRAG"=>1
				,"wxEVT_COMMAND_LIST_BEGIN_LABEL_EDIT"=>1
				,"wxEVT_COMMAND_LIST_END_LABEL_EDIT"=>1
				,"wxEVT_COMMAND_LIST_DELETE_ITEM"=>1
				,"wxEVT_COMMAND_LIST_DELETE_ALL_ITEMS"=>1
				,"wxEVT_COMMAND_LIST_GET_INFO"=>1
				,"wxEVT_COMMAND_LIST_SET_INFO"=>1
				,"wxEVT_COMMAND_LIST_ITEM_SELECTED"=>1
				,"wxEVT_COMMAND_LIST_ITEM_DESELECTED"=>1
				,"wxEVT_COMMAND_LIST_KEY_DOWN"=>1
				,"wxEVT_COMMAND_LIST_INSERT_ITEM"=>1
				,"wxEVT_COMMAND_LIST_COL_CLICK"=>1
				,"wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK"=>1
				,"wxEVT_COMMAND_LIST_ITEM_MIDDLE_CLICK"=>1
				,"wxEVT_COMMAND_LIST_ITEM_ACTIVATED"=>1
				,"wxEVT_COMMAND_LIST_CACHE_HINT"=>1
				,"wxEVT_COMMAND_LIST_COL_RIGHT_CLICK"=>1
				,"wxEVT_COMMAND_LIST_COL_BEGIN_DRAG"=>1
				,"wxEVT_COMMAND_LIST_COL_DRAGGING"=>1
				,"wxEVT_COMMAND_LIST_COL_END_DRAG"=>1
				,"wxEVT_COMMAND_LIST_ITEM_FOCUSED"=>1
				,"wxEVT_CLOSE_WINDOW"=>1
				,"wxNB_TOP"=>1
				,"wxNB_LEFT"=>1
				,"wxNB_RIGHT"=>1
				,"wxNB_BOTTOM"=>1
				,"wxNB_FIXEDWIDTH"=>1
				,"wxNB_MULTILINE"=>1
				,"wxNB_NOPAGETHEME"=>1
				,"wxNB_FLAT"=>1
				,"wxID_OK"=>1
				,"wxID_CANCEL"=>1
				,"wxTE_MULTILINE"=>1
				,"wxTE_PASSWORD"=>1
				,"wxTE_READONLY"=>1
				,"wxTE_PROCESS_ENTER"=>1
				,"wxTE_PROCESS_TAB"=>1
				,"wxTE_RICH"=>1
				,"wxTE_RICH2"=>1
				,"wxTE_AUTO_URL"=>1
				,"wxTE_NOHIDESEL"=>1
				,"wxHSCROLL"=>1
				,"wxTE_NO_VSCROLL"=>1
				,"wxTE_LEFT"=>1
				,"wxTE_CENTRE"=>1
				,"wxTE_RIGHT"=>1
				,"wxTE_DONTWRAP"=>1
				,"wxTE_CHARWRAP"=>1
				,"wxTE_WORDWRAP"=>1
				,"wxTE_BESTWRAP"=>1
				,"wxTE_CAPITALIZE"=>1
				,"wxOK"=>1
				,"wxCANCEL"=>1
				,"wxYES_DEFAULT"=>1
				,"wxNO_DEFAULT"=>1
				,"wxICON_EXCLAMATION"=>1
				,"wxICON_HAND"=>1
				,"wxICON_ERROR"=>1
				,"wxICON_QUESTION"=>1
				,"wxICON_INFORMATION"=>1
				,"wxSTAY_ON_TOP"=>1
				,"wxBORDER_DEFAULT"=>1
				,"wxBORDER_SIMPLE"=>1
				,"wxBORDER_SUNKEN"=>1
				,"wxBORDER_RAISED"=>1
				,"wxBORDER_STATIC"=>1
				,"wxBORDER_THEME"=>1
				,"wxBORDER_NONE"=>1
				,"wxBORDER_DOUBLE"=>1
				,"wxTRANSPARENT_WINDOW"=>1
				,"wxTAB_TRAVERSAL"=>1
				,"wxWANTS_CHARS"=>1
				,"wxNO_FULL_REPAINT_ON_RESIZE"=>1
				,"wxVSCROLL"=>1
				,"wxHSCROLL"=>1
				,"wxALWAYS_SHOW_SB"=>1
				,"wxCLIP_CHILDREN"=>1
				,"wxFULL_REPAINT_ON_RESIZE"=>1
				,"wxLB_SINGLE"=>1
				,"wxLB_MULTIPLE"=>1
				,"wxLB_EXTENDED"=>1
				,"wxLB_HSCROLL"=>1
				,"wxLB_ALWAYS_SB"=>1
				,"wxLB_NEEDED_SB"=>1
				,"wxLB_SORT"=>1
				,"wxSOCKET_NOERROR"=>1
				,"wxSOCKET_INVOP"=>1
				,"wxSOCKET_IOERR"=>1
				,"wxSOCKET_INVADDR"=>1
				,"wxSOCKET_INVSOCK"=>1
				,"wxSOCKET_NOHOST"=>1
				,"wxSOCKET_INVPORT"=>1
				,"wxSOCKET_WOULDBLOCK"=>1
				,"wxSOCKET_TIMEDOUT"=>1
				,"wxSOCKET_MEMERR"=>1
				,"wxSOCKET_INPUT"=>1
				,"wxSOCKET_OUTPUT"=>1
				,"wxSOCKET_CONNECTION"=>1
				,"wxSOCKET_LOST"=>1
				,"wxEVT_SOCKET"=>1
				,"wxFD_DEFAULT_STYLE"=>1
				,"wxFD_OPEN"=>1
				,"wxFD_SAVE"=>1
				,"wxFD_OVERWRITE_PROMPT"=>1
				,"wxFD_FILE_MUST_EXIST"=>1
				,"wxFD_MULTIPLE"=>1
				,"wxFD_CHANGE_DIR"=>1
				,"wxFD_PREVIEW"=>1
				,"wxCB_SIMPLE"=>1
				,"wxCB_DROPDOWN"=>1
				,"wxCB_READONLY"=>1
				,"wxCB_SORT"=>1
				,"wxTR_EDIT_LABELS"=>1
				,"wxTR_NO_BUTTONS"=>1
				,"wxTR_HAS_BUTTONS"=>1
				,"wxTR_NO_LINES"=>1
				,"wxTR_FULL_ROW_HIGHLIGHT"=>1
				,"wxTR_LINES_AT_ROOT"=>1
				,"wxTR_HIDE_ROOT"=>1
				,"wxTR_ROW_LINES"=>1
				,"wxTR_HAS_VARIABLE_ROW_HEIGHT"=>1
				,"wxTR_SINGLE"=>1
				,"wxTR_MULTIPLE"=>1
				,"wxTR_DEFAULT_STYLE"=>1
	);
	$defIni = array(
				/*"wxThread"	=> array(
								"_virtuals"		=> array(
													"Entry"=>1
													//,"OnExit" =>1
												)
								,"_events"		=> array("wxEVT_SIZE") // dummy event to populate class
								,"wxThread" 	=> array(
												array("void")
												,array(
													array(1)
													,array(null)//,"wxTHREAD_DETACHED"
												)
											)
								,"Create"		=> array(
												array("void"),
												array(1)
											)
							)*/ // too many exceptions
				"wxBoxSizer"	=> array(
								"_extends"		=> "wxSizer"
								,"wxBoxSizer" 	=> array(
												array("void","int"),
												array(1,1)
											)
								,"RecalcSizes"	=> array(
												array("void"),
												array(1)
											)
								,"GetOrientation"	=> array(
												array("int"),
												array(1)
											)
								,"AddStretchSpacer"=> array(
												array("void","int")
												,array(
													array(1)
													,array(null,"1")
												)
											)
							)
				,"wxSizer"		=> array(
								 "_type"		=>"abstract"
								,"Add" 		=> array(
												array("void","wxWindow*",	"int",	"int",	"int"),
												array(1,1),
												array("void","wxSizer*",	"int",	"int",	"int"),
												array(1,2),
												array("void","int",	"int",	"int",	"int", "int"),
												array(1,1,1)
											)
							)
				,"wxEvtHandler"		=> array(
								 "_type"		=>"abstract"
							)
				,"wxWindow"		=> array(
								 //"_type"		=>"abstract"
								"_extends"		=>"wxEvtHandler"
								,"SetSizer"		=> array(
												array("void","wxSizer*"),
												array(1,1)
											)
							)
				,"wxSplitterWindow"=> array(
								 "_extends"		=>"wxWindow"
								,"wxSplitterWindow" => array(
												array("void","wxWindow*", "int","const wxPoint&","const wxSize&","long","const wxString&")
												,array(
														array(1,1,1)
														,array(null,null,null,"wxDefaultPosition","wxDefaultSize","wxSP_3D",'wxT("splitter")')
													)
											)
								,"SetSplitMode" => array(
												array("void","int")
												,array(1,1)
											)
								,"SetMinimumPaneSize" => array(
												array("void","int")
												,array(1,1)
											)
								,"UpdateSize"	=> array(
												array("void")
												,array(1)
											)
								,"SetSashSize" => array(
												array("void","int")
												,array(1,1)
											)
								,"Unsplit"		=> array(
												array("void","wxWindow*")
												,array(
													array(1)
													,array(null,"NULL")
												)
											)
								,"Initialize"	=> array(
												array("void","wxWindow*")
												,array(1,1)
											)
								,"ReplaceWindow" => array(
												array("bool","wxWindow*","wxWindow*")
												,array(1,1,1)
											)
								,"SplitHorizontally"=> array(
												array("bool","wxWindow*","wxWindow*","int")
												,array(
													array(1,1,1)
													,array(null,null,null,"0")
												)
											)
								,"SplitVertically"=> array(
												array("bool","wxWindow*","wxWindow*","int")
												,array(
													array(1,1,1)
													,array(null,null,null,"0")
												)
											)
								,"IsSplit"		=> array(
												array("bool")
												,array(1)
											)
								,"GetMinimumPaneSize"=> array(
												array("int")
												,array(1)
											)
								,"GetSashPosition"=> array(
												array("int")
												,array(1)
											)
								,"GetSplitMode"=> array(
												array("int")
												,array(1)
											)
							)
				,"wxMenuItem"=> array(
							)
				,"wxMenu"	=> array(
								"wxMenu"	=> array(
												array("void","const wxString&","long")
												,array(
													array(1)
													,array(null,"wxEmptyString","0")
												)
											)
								,"Append"	=> array(
												array("wxMenuItem*","int","const wxString&","const wxString&","wxItemKind")
												,array(
													array(1,1)
													,array(null,null,"wxEmptyString","wxEmptyString","wxITEM_NORMAL")
												)
												,array("void","int","const wxString&","wxMenu*","const wxString&")
												,array(
													array(1,1,1,1)
													,array(null,null,null,null,"wxITEM_NORMAL")
												)
											)
								,"AppendCheckItem"	=> array(
												array("wxMenuItem*","int","const wxString&","const wxString&")
												,array(
													array(1,1,1)
													,array(null,null,null,"wxEmptyString","wxITEM_NORMAL")
												)
											)
							)
				,"wxMenuBar"	=> array(
								"wxMenuBar"	=> array(
												array("void","long")
												,array(
													array(1)
													,array(null,"0")
												)
											)
								,"Append"	=> array(
												array("bool","wxMenu*","const wxString&")
												,array(1,2,1)
											)
							)
				,"wxToolBar"	=> array(
								"wxToolBar"	=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","long","const wxString&"),
												array(
													array(2,1,1),
													array(null,null,null,"wxDefaultPosition","wxDefaultSize","wxTB_HORIZONTAL | wxNO_BORDER","wxPanelNameStr")
												)
											)
								,"GetToolsCount"=> array(
												array("int")
												,array(1)
											)
								,"AddSeparator"=> array(
												array("void")
												,array(1)
											)
								,"Realize"=> array(
												array("void")
												,array(1)
											)
								,"AddTool"	=> array(
												array("void","int","const wxString&","const wxBitmap&","const wxString&","wxItemKind")
												,array(
													array(1,1,1,1)
													,array(null,null,null,null,"wxEmptyString","wxITEM_NORMAL")
												)
											)
							)
				,"wxEvent"=> array(
							)
				,"wxCommandEvent"=> array(
								"_extends"		=> "wxEvent"
								,"wxCommandEvent"	=> array(
												array("void")
												,array(1)
											)
								,"IsChecked"	=> array(
												array("bool")
												,array(1)
											)
								,"GetString"		=> array(
												array("wxString"),
												array(1)
											)
								,"GetSelection"	=> array(
												array("int")
												,array(1)
											)
							)
				,"wxPanel"	=> array(
								"_extends"		=> "wxWindow"
								,"wxPanel"		=> array(
												array("void","wxWindow*", "int", "const wxPoint&","const wxSize&","long","const wxString&")
												,array(
														array(1,1)
														,array(null,null,"wxID_ANY","wxDefaultPosition","wxDefaultSize","wxTAB_TRAVERSAL",'wxPanelNameStr')
													)
								)
						)
				,"wxFrame"	=> array(
								"_extends"		=> "wxWindow"
								,"wxFrame"		=> array(
												array("void","wxWindow*" , "int", "const wxString&","const wxPoint&","const wxSize&","long","const wxString&")
												,array(
														array(1,4,4,1) // 4 - accept nulls
														,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","wxDEFAULT_FRAME_STYLE",'wxFrameNameStr')
													)
											)
								,"Show"		=> array(
												array("void"),
												array(1)
											)
								,"SetMenuBar"	=> array(
												array("void","wxMenuBar*"),
												array(1,2)
											)
								,"CreateToolBar"=> array(
												array("wxToolBar*","long","int","const wxString&")
												,array(
														array(1)
														,array(null,"wxNO_BORDER | wxTB_HORIZONTAL","-1",'wxT("toolBar")')
												)
											)
								//wxTopLevelWindow
								,"SetIcon"		=> array(
												array("void","const wxIcon&"),
												array(1,1)
											)
							)
				,"wxImage"	=> array(
								"wxImage"		=> array(
												array("void","const wxString&"),
												array(1,1)
											)
							)
				,"wxBitmap"	=> array(
								"wxBitmap"		=> array(
												array("void","const wxString&","int")
												,array(1,1,1)
												,array("void","const wxImage&")
												,array(1,1)
											)
							)
				,"wxStaticBitmap"	=> array(
								"_extends"		=> "wxWindow"
								,"wxStaticBitmap"	=> array(
												array("void","wxWindow*","int","const wxBitmap&"),
												array(2,1,1,2)
											)
							)
				,"wxGauge"		=> array(
								"_extends"		=> "wxWindow"
								,"wxGauge"		=> array(
												array("void","wxWindow*","int","int","const wxPoint&","const wxSize&","int"),
												array(
													array(2,1,1,1),
													array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","wxGA_HORIZONTAL")
												)
												
											)
								,"GetBezelFace"	=> array(
												array("int"),
												array(1)
											)
								,"GetRange"	=> array(
												array("int"),
												array(1)
											)
								,"GetShadowWidth" => array(
												array("int"),
												array(1)
											)
								,"SetRange"	=> array(
												array("void","int"),
												array(1,1)
											)
								,"SetValue"		=> array(
												array("void","int"),
												array(1,1)
											)
								,"IsVertical"		=> array(
												array("bool"),
												array(1)
											)
								,"SetBezelFace"	=> array(
												array("void","int"),
												array(1,1)
											)
								,"SetShadowWidth" => array(
												array("void","int"),
												array(1,1)
											)
								,"GetValue"		=> array(
												array("int"),
												array(1)
											)
								,"Pulse"		=> array(
												array("void"),
												array(1)
											)
							)
				,"wxButton"	=> array(
								"_extends"		=> "wxWindow"
								,"wxButton"		=> array(
												array("void","wxWindow*","int","const wxString&","const wxPoint&","const wxSize&","int","const wxValidator&","const wxString&")
												,array(
													array(2,1,1,1)
													,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator",'wxButtonNameStr')
												)
											)
								/*,"Create"		=> array(
												array("bool","wxWindow*","int","const wxString&","const wxPoint&","const wxSize&","int","const wxValidator&","const wxString&")
												,array(
													array(2,1,1,1)
													,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator",'"button"')
												)
											)*/ //Problems
								,"GetLabel"		=> array(
												array("wxString"),
												array(1)
											)
								,"SetDefault"	=> array(
												array("void"),
												array(1)
											)
								,"GetDefaultSize"	=> array(
												array("wxSize"),
												array(1)
											)
								,"SetLabel"		=> array(
												array("void","const wxString&"),
												array(1,1)
											)
							)
				,"wxBitmapButton"=> array(
								"_extends"		=>"wxButton"
								,"wxBitmapButton"=> array(
												array("void","wxWindow*","int","const wxBitmap&","const wxPoint&","const wxSize&","int","const wxValidator&", "const wxString&")
												,array(
													array(2,1,1,1)
													,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","wxBU_AUTODRAW","wxDefaultValidator",'wxButtonNameStr')
												)
											)
								,"GetBitmapDisabled"=>array(
												array("const wxBitmap&")
												,array(1)
											)
								,"GetBitmapFocus"=>array(
												array("const wxBitmap&")
												,array(1)
											)
								,"GetBitmapHover"=>array(
												array("const wxBitmap&")
												,array(1)
											)
								,"GetBitmapLabel"=>array(
												array("const wxBitmap&")
												,array(1)
											)
								,"GetBitmapSelected"=>array(
												array("const wxBitmap&")
												,array(1)
											)
								,"SetBitmapDisabled"=>array(
												array("void","const wxBitmap&")
												,array(1,1)
											)
								,"SetBitmapFocus"=>array(
												array("void","const wxBitmap&")
												,array(1,1)
											)
								,"SetBitmapHover"=>array(
												array("void","const wxBitmap&")
												,array(1,1)
											)
								,"SetBitmapLabel"=>array(
												array("void","const wxBitmap&")
												,array(1,1)
											)
								,"SetBitmapSelected"=>array(
												array("void","const wxBitmap&")
												,array(1,1)
											)
											
							)
				,"wxToggleButton"=> array(
								"_extends"		=> "wxWindow"
								,"wxToggleButton"=> array(
												array("void","wxWindow*","int","const wxString&","const wxPoint&","const wxSize&","int","const wxValidator&", "const wxString&")
												,array(
													array(2,1,1,1)
													,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator",'wxCheckBoxNameStr')
												)
											)
								,"GetValue"		=> array(
												array("bool")
												,array(1)
											)
								,"SetValue"		=> array(
												array("void","const bool")
												,array(1,1)
											)
				
							)
				,"wxCalendarCtrl"=> array(
								"_extends"		=> "wxWindow"
								,"wxCalendarCtrl"=> array(
												array("void","wxWindow*","int","const wxDateTime&","const wxPoint&","const wxSize&","int", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultDateTime","wxDefaultPosition","wxDefaultSize","0",'wxCalendarNameStr')
												)
											)
								,"SetDate"		=> array(
												array("void","const wxDateTime&")
												,array(1,1)
											)
								,"GetDate"		=> array(
												array("const wxDateTime&")
												,array(1)
											)
								,"EnableYearChange"=> array(
												array("void","bool")
												,array(
													array(1)
													,array(null,"true")
												)
											)
								,"EnableMonthChange"=> array(
												array("void","bool")
												,array(
													array(1)
													,array(null,"true")
												)
											)
								,"EnableHolidayDisplay"=> array(
												array("void","bool")
												,array(
													array(1)
													,array(null,"true")
												)
											)
								/*
									SetHeaderColours 
									GetHeaderColourBg
									SetHighlightColours
									GetHighlightColourFg
									GetHighlightColourBg
									SetHolidayColours
									GetHolidayColourFg
									GetHolidayColourBg
									GetAttr
									SetAttr
									SetHoliday
									ResetAttr
									HitTest
								*/
								
							)
				,"wxCheckBox"	=> array(
								"_extends"		=> "wxWindow"
								,"wxCheckBox"=> array(
												array("void","wxWindow*","int","const wxString&","const wxPoint&","const wxSize&","int","const wxValidator&", "const wxString&")
												,array(
													array(2,1,1,1)
													,array(null,null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator",'wxCheckBoxNameStr')
												)
											)
								,"GetValue"		=> array(
												array("bool")
												,array(1)
											)
								/*
									Get3StateValue
								*/
								,"Is3rdStateAllowedForUser" => array(
												array("bool")
												,array(1)
											)
								,"Is3State" => array(
												array("bool")
												,array(1)
											)
								,"IsChecked" => array(
												array("bool")
												,array(1)
											)
								,"SetValue"		=> array(
												array("void","const bool")
												,array(1,1)
											)
								/*
									Set3StateValue
								*/
				
							)
				,"wxChoice"		=> array(
								"_extends"		=> "wxWindow"
								,"wxChoice"		=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","const wxArrayString&", "int", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","NULL","0","wxDefaultValidator",'wxChoiceNameStr')
												)
											)
								,"GetColumns"	=> array(
												array("int")
												,array(1)
											)
								,"GetCurrentSelection" => array(
												array("int")
												,array(1)
											)
								,"SetColumns" 	=> array(
												array("void","int")
												,array(
													array(1)
													,array(null,"1")
												)
											)
							)
				,"wxListBox"	=> array(
								"_extends"		=> "wxWindow"
								,"wxListBox"	=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","const wxArrayString&", "int", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","NULL","0","wxDefaultValidator",'wxListBoxNameStr')
												)
											)
								,"Deselect"		=> array(
												array("void","int")
												,array(1,1)
											)
								/*
									GetSelections
								*/
								,"InsertItems"	=> array(
												array("void","const wxArrayString&","int")
												,array(1,1,1)
											)
								,"IsSelected"	=> array(
												array("bool","int")
												,array(1,1)
											)
								,"Set"		=> array(
												array("void","const wxArrayString&")
												,array(1,1)
											)
								,"SetFirstItem"	=> array(
												array("void","const wxString&")
												,array(1,1)
												,array("void","int")
												,array(1,1)
											)
							)
				,"wxCheckListBox"=> array(
								"_extends"		=> "wxListBox"
								,"wxCheckListBox"=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","const wxArrayString&", "int", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","NULL","0","wxDefaultValidator",'wxListBoxNameStr')
												)
											)
								,"Check"		=> array(
												array("void","int","bool")
												,array(1,1,1)
											)
								,"IsChecked"	=> array(
												array("bool","int")
												,array(1,1)
											)
							)
				,"wxTreeEvent"	=> array(
								"_extends"		=> "wxEvent"
								,"GetLabel"	=> array(
												array("wxString")
												,array(1)
											)
								,"GetItem"	=> array(
												array("wxTreeItemId")
												,array(1)
											)
							)
				,"wxTreeItemId"	=> array(
								"IsOk"	=> array(
												array("bool")
												,array(1)
											)
							)
				,"wxTreeCtrl"	=> array(
								"_implements"	=> array("wxWindow","")
								,"wxTreeCtrl"	=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","int", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator",'wxTreeCtrlNameStr')
												)
											)
								,"AddRoot"		=> array(
												array("wxTreeItemId","const wxString&","int","int")
												,array(
													array(1,1)
													,array(null,null,"-1","-1")
												)
											)
								,"AppendItem"	=> array(
												array("wxTreeItemId","const wxTreeItemId&","const wxString&","int","int")
												,array(
													array(1,1,1)
													,array(null,null,null,"-1","-1")
												)
											)
								,"ItemHasChildren"=> array(
												array("bool","const wxTreeItemId&")
												,array(1,1)
											)
								,"CollapseAll"	=> array(
												array("void")
												,array(1)
											)
								,"GetItemText"	=> array(
												array("wxString","const wxTreeItemId&")
												,array(1,1)
											)
								,"ExpandAll"		=> array(
												array("void")
												,array(1)
											)
							)				
				,"wxListCtrl"	=> array(
								"_extends"		=> "wxWindow"
								,"wxListCtrl"	=> array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","long", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","wxLC_ICON","wxDefaultValidator",'wxListCtrlNameStr')
												)
											)
								,"InsertColumn"	=> array(
												array("long","long","const wxString&","int","int")
												,array(
													array(1,1,1)
													,array(null,null,null,"wxLIST_FORMAT_LEFT","-1")
												)
											)
							)
				,"wxDataViewCtrl"	=> array(
								"_extends"		=> "wxWindow"
								,"wxDataViewCtrl" => array(
												array("void","wxWindow*","int","const wxPoint&","const wxSize&","long", "const wxValidator&")
												,array(
													array(2,1,1)
													,array(null,null,null,"wxDefaultPosition","wxDefaultSize","0","wxDefaultValidator")
												)
											)
								,"AppendTextColumn" => array(
												array("bool","const wxString&","int","wxDataViewCellMode","int")
												,array(
													array(1,1,1)
													,array(null,null,null,"wxDATAVIEW_CELL_INERT","-1")
												)
											)
							)
				,"wxArrayString"	=> array(
								"wxArrayString"	=>array(
												array("void")
												,array(1)
											)
								,"Clear"		=>array(
												array("void")
												,array(1)
											)
								,"Empty"		=>array(
												array("void")
												,array(1)
											)
								,"Add"		=>array(
												array("void","const wxString&")
												,array(1,1)
											)
								// DEPRECATED
								,"Count"		=>array(
												array("size_t")
												,array(1)
											)
								,"GetCount"		=>array(
												array("size_t")
												,array(1)
											)
								,"RemoveAt"	=>array(
												array("void","size_t","size_t")
												,array(
													array(1,1)
													,array(null,null,"1")
												)
											)
								,"Sort"		=>array(
												array("void","bool")
												,array(
													array(1)
													,array(null,"false")
												)
											)
							)
				,"wxIcon"		=> array(
								"wxIcon"		=> array(
												array("void","const wxString&", "wxBitmapType","int" ,"int")
												,array(
													array(1,1,1)
													,array(null,null,null,"-1","-1")
												)
											)
							)
				,"wxTaskBarIcon"	=> array(
								"wxTaskBarIcon"	=> array(
												array("void")
												,array(1)
											)
								,"SetIcon"		=> array(
												array("void","const wxIcon&","const wxString&")
												,array(1,1,1)
											)
								,"RemoveIcon"	=> array(
												array("void")
												,array(1)
											)
							)
				,"wxValidator"	=> array()
				,"wxPoint"		=> array()
				,"wxSize"		=> array(
								"wxSize"		=> array(
												array("void")
												,array(1)
												,array("void","int","int")
												,array(1,1,1)
											)
							)
				,"wxTextCtrl"	=> array(
								"_extends"		=> "wxWindow"
								,"wxTextCtrl"	=> array(
												array("void","wxWindow*","int","const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,'wxEmptyString')
												)
												
											)
							)
							
				,"wxComboBox"	=> array(
								"_extends"		=> "wxWindow"
								,"wxComboBox"	=> array(
												array("void","wxWindow*","int","const wxString&","const wxPoint&","const wxSize&","const wxArrayString&", "int", "const wxValidator&", "const wxString&")
												,array(
													array(2,1,1)
													,array(null,null,null,'wxEmptyString',"wxDefaultPosition","wxDefaultSize","NULL","0","wxDefaultValidator",'wxComboBoxNameStr')
												)
											)
								,"CanCopy"		=> array(
												array("bool")
												,array(1)
											)
								,"CanCut"		=> array(
												array("bool")
												,array(1)
											)
								,"CanPaste"		=> array(
												array("bool")
												,array(1)
											)
								,"CanRedo"		=> array(
												array("bool")
												,array(1)
											)
								,"CanUndo"		=> array(
												array("bool")
												,array(1)
											)
								,"Copy"		=> array(
												array("void")
												,array(1)
											)
								,"Cut"		=> array(
												array("void")
												,array(1)
											)
								,"Paste"		=> array(
												array("void")
												,array(1)
											)
								,"Redo"		=> array(
												array("void")
												,array(1)
											)
								,"Undo"		=> array(
												array("void")
												,array(1)
											)
								,"GetCurrentSelection"=> array(
												array("int")
												,array(1)
											)
								,"GetInsertionPoint"=> array(
												array("long")// should be LONG
												,array(1)
											)
								,"SetInsertionPoint"=> array(
												array("void","long")// should be LONG
												,array(1,1)
											)
								,"SetInsertionPointEnd"=> array(
												array("void")
												,array(1)
											)
								,"SetSelection"	=> array(
												array("void","long","long")// should be LONG
												,array(1,1,1)
											)
								,"GetSelection"	=> array(
												array("void","long*","long*")// should be LONG
												,array(1,1,1)
											)
								,"Remove"		=> array(
												array("void","long","long")// should be LONG
												,array(1,1,1)
											)
								,"Replace"	=> array(
												array("void","long","long", "const wxString&")// should be LONG
												,array(1,1,1,1)
											)
								,"GetValue"		=> array(
												array("wxString")
												,array(1)
											)
								,"SetValue"		=> array(
												array("void","const wxString&")
												,array(1,1)
											)
								/*
									GetLastPosition
								*/
							)
				
				/*,"wxEvtHandler"	=> array(
								 "_type"		=> "abstract"
								,"Connect"		=> array(
												array("void","wxEventType","wxObjectEventFunction"),
												array(1,1)
											)
							)*/
	);

	$dynCasts = array();//"wxDialog"
	
	$groups	= array(
				"frame"	=> array()
	);
	
	if(isset($argv[1]) && file_exists($argv[1]))
	{
		$defIni = unserialize(file_get_contents($argv[1]));
		//blacklist
		unset($defIni['wxSizer']['Show']);
	}
	
	if(isset($argv[2]) && file_exists($argv[2]))
	{
		$temp = unserialize(file_get_contents($argv[2]));
		$defConsts = array_merge($temp,$defConsts);

                unset($defConsts['wxHTTP_GET']);
                unset($defConsts['wxHTTP_POST']);
                unset($defConsts['wxHTTP_HEAD']);
		
		unset($defConsts['wxHIDE_READONLY']);
		unset($defConsts['wxBATTERY_NORMAL_STATE']);
		unset($defConsts['wxBATTERY_LOW_STATE']);
		unset($defConsts['wxBATTERY_CRITICAL_STATE']);
		unset($defConsts['wxBATTERY_SHUTDOWN_STATE']);
		unset($defConsts['wxBATTERY_UNKNOWN_STATE']);
		unset($defConsts['wxPOWER_SOCKET']);
		unset($defConsts['wxPOWER_BATTERY']);
		unset($defConsts['wxPOWER_UNKNOWN']);
		unset($defConsts['wxCURSES']);
		unset($defConsts['wxXVIEW_X']);
		unset($defConsts['wxMOTIF_X']);
		unset($defConsts['wxCOSE_X']);
		unset($defConsts['wxNEXTSTEP']);
		unset($defConsts['wxMAC']);
		unset($defConsts['wxMAC_DARWIN']);
		unset($defConsts['wxBEOS']);
		unset($defConsts['wxGEOS']);
		unset($defConsts['wxOS2_PM']);
		unset($defConsts['wxWINDOWS']);
		unset($defConsts['wxMICROWINDOWS']);
		unset($defConsts['wxPENWINDOWS']);
		unset($defConsts['wxWIN386']);
		unset($defConsts['wxWINDOWS_CE']);
		unset($defConsts['wxWINDOWS_POCKETPC']);
		unset($defConsts['wxWINDOWS_SMARTPHONE']);
		unset($defConsts['wxMGL_UNIX']);
		unset($defConsts['wxMGL_X']);
		unset($defConsts['wxMGL_WIN32']);
		unset($defConsts['wxMGL_OS2']);
		unset($defConsts['wxMGL_DOS']);
		unset($defConsts['wxWINDOWS_OS2']);
		unset($defConsts['wxUNIX']);
		unset($defConsts['wxX11']);
		unset($defConsts['wxPALMOS']);
		unset($defConsts['wxDOS']);
		unset($defConsts['wxEVT_COMMAND_LIST_SET_INFO']);
		unset($defConsts['wxEVT_COMMAND_LIST_GET_INFO']);
		unset($defConsts['wxEVT_POWER']);
		unset($defConsts['wxGTK_WIN32']);
		unset($defConsts['wxGTK_OS2']);
		unset($defConsts['wxGTK_BEOS']);

		unset($defConsts['wxIMAGE_LIST_NORMAL']);
		unset($defConsts['wxIMAGE_LIST_SMALL']);
		unset($defConsts['wxIMAGE_LIST_STATE']);
		unset($defConsts['PHP_WXWIDGETS_VERSION']);

		unset($defConsts['wxInside']);
		unset($defConsts['wxOutLeft']);
		unset($defConsts['wxOutRight']);
		unset($defConsts['wxOutTop']);
		unset($defConsts['wxOutBottom']);
		
		unset($defConsts['wxTextFileType_None']);
		unset($defConsts['wxTextFileType_Unix']);
		unset($defConsts['wxTextFileType_Dos']);
		unset($defConsts['wxTextFileType_Mac']);
		unset($defConsts['wxTextFileType_Os2']);
	}
	
	/*$hd = fopen("classes.dump","w");
	fwrite($hd, serialize($defIni));
	fclose($hd);*/

	unset($defIni['wxMenuItem']['wxMenuItem']);
	unset($defIni['wxDialog']['SetModal']);

	//para as classes que não tiverem ficheiro
	foreach($defIni as $cName => $cVal)
	{
		$found = false;
		foreach($groups as $file => $cls)
		{
			if(in_array($cName,$cls))
				$found = true;
		}
		if(!$found)
			$groups["frame"][] = $cName;
	}


	function extensionsOfClass($myType)
	{
		global $defIni;
		$typeVerifier = array();
		//if($defIni[$myType]['_type']!="abstract")
		$typeVerifier[$myType] = 1;
		
		if(isset($defIni[$myType]['_implements']))
		{
			foreach($defIni[$myType]['_implements'] as $imp)
				$typeVerifier[$imp]=1;
		
		}
		elseif(isset($defIni[$myType]['_extends']))
		{
			$typeVerifier = array_merge($typeVerifier,extensionsOfClass($defIni[$myType]['_extends']));
		}
		return $typeVerifier;
	}
	
	function derivationsOfClass($myType)
	{
		//retorna lista de todas as subclasses derivadas desta + esta
		global $defIni;
		$typeVerifier = array();
		if($defIni[$myType]['_type']!="abstract")
			$typeVerifier[$myType] = 1;
		foreach($defIni as $k=> $v)
		{
			if(isset($v['_implements']))
			{
				if(in_array($myType,$v['_implements']))
				{
					$typeVerifier[$k]=1;
					$typeVerifier = array_merge($typeVerifier,derivationsOfClass($k));
				}
			}
			if($v['_extends']==$myType)
			{
				$typeVerifier[$k]=1;
				$typeVerifier = array_merge($typeVerifier,derivationsOfClass($k));
			}
		}
		return $typeVerifier;
	}
	
	$evnHandlers = derivationsOfClass('wxEvtHandler');
	
	function funcsOfClass($classN,$ctor=0,$ar = array())
	{
		global $defIni;
		global $evnHandlers;
		if(!isset($defIni[$classN]))
			return array();

		$classDef3 = $classDef = $defIni[$classN];

		foreach($classDef as $funcName => $funcDef)
                {
                        if($funcName[0]=="_")
                                continue;
                        $funcName2 = $funcName;
                        if($classN==$funcName)
                        {
                                if(!$ctor)
                                        continue;
                                $funcName2 = "__construct";
                        }
			if(in_array($funcName2,$ar))
                                continue;
			$ar[] = $funcName2;
			
?>
        PHP_ME(php_<?=$classN?>, <?=$funcName2?>, NULL,ZEND_ACC_PUBLIC<? if($funcName2 == "__construct" && $ctor){?>|ZEND_ACC_CTOR<?}?>)
<?
                }


		//becarefull not to mark a subclasse tha is derived from another
		//this should be recursive
		if(isset($classDef['_implements']))
		{
			foreach($classDef['_implements'] as $imp)
			{
				$ar = array_merge($ar,funcsOfClass($imp,0,$ar));
				continue;
				
				if(!isset($defIni[$imp]))
					continue;
				$classDef2 = $defIni[$imp];
				foreach($classDef2 as $funcName2 => $funcDef2)
				{
					if($funcName2[0]=="_")//ignore implements and constructors
						continue;
					$found=false;
					$funcNamer = $funcName2;
					if($funcName2==$imp)
						$funcNamer = $classN;
					foreach($classDef3 as $funcName => $funcDef)
						if($funcNamer==$funcName)
							$found = true;
							
					//if already exists functions with yhe same name, verify if equal args
					if($found)
					{
						for($i=0;$i<count($funcDef2);$i+=2)
						{
							$found = false;
							for($e=0;$e<count($classDef[$funcNamer]);$e+=2)
								if($funcDef2[$i]==$classDef[$funcNamer][$e])
									$found = true;

							if(!$found)//merge overloads
							{
								$classDef[$funcNamer][] = $classDef2[$funcName2][$i];
								$classDef[$funcNamer][] = $classDef2[$funcName2][$i+1];
							}
						}
					}
					elseif($funcName2==$imp){// prevent foreign constructors
						//just skip it
					}else
					{
?>
	PHP_ME(php_<?=$imp?>, <?=$funcName2?>, NULL,ZEND_ACC_PUBLIC)
<?
						//$classDef3[$funcName2]=$funcDef2;
					}
				}
			}
		}
		if($classN=="wxFrame"){
			//var_dump($ar);
			//var_dump($classDef);
			//die();
		}

		return $ar;

		foreach($classDef as $funcName => $funcDef)
		{
			if($funcName[0]=="_")
				continue;
			$funcName2 = $funcName;
			if($classN==$funcName)
			{
				if(!$ctor)
					continue;
				$funcName2 = "__construct";
			}
?>
	PHP_ME(php_<?=$classN?>, <?=$funcName2?>, NULL,ZEND_ACC_PUBLIC<? if($funcName2 == "__construct" && $ctor){?>|ZEND_ACC_CTOR<?}?>)
<?
		}
		
		
		if(isset($evnHandlers[$classN])  && $ctor)
		{
?>
	PHP_ME(php_<?=$classN?>, Connect, NULL,ZEND_ACC_PUBLIC)
<?
		}

		if(isset($classDef['_implements']))
		{
			/*foreach($classDef['_implements'] as $imp)
			{
				if(!isset($defIni[$imp]))
					continue;
				$classDef = $defIni[$imp];
				foreach($classDef as $funcName => $funcDef)
				{
					if($funcName[0]=="_")
						continue;
					$funcName2 = $funcName;
					if($imp==$funcName)
						continue;
?>
	PHP_ME(php_<?=$imp?>, <?=$funcName2?>, NULL,ZEND_ACC_PUBLIC)
<?
				}
			
			}*/
		}
		else
			funcsOfClass($classDef['_extends']);
	}

	ob_start();
	foreach($defIni as $className => $classDef)
	{
		$ets = extensionsOfClass($className);
		/*foreach($ets as $k =>$v)
		{
			if($k == $className)
				continue;
			if(isset($defIni[$k]['_events']))
			{
				if(!isset($defIni[$className]['_events']))
					$defIni[$className]['_events'] = $defIni[$k]['_events'];
				else
					$defIni[$className]['_events'] = array_merge($defIni[$className]['_events'],$defIni[$k]['_events']);
			}
		}*/
		
	
		foreach($classDef as $methodName => $methodArgs)
		{
			
			/*if($methodName=="_extends")
			{
				if(!isset($defIni[$methodArgs]))
					$defIni[$methodArgs] = array("_type"=>"abstract");//não é implementada
				
				if(!isset($defIni[$methodArgs]['_baseFor']))
					$defIni[$methodArgs]['_baseFor'] = array();
					
				$defIni[$methodArgs]['_baseFor'][$className] = 1;
				
			}*/
			
			//pile up events
		
			if($methodName[0]=="_")
				continue;
			echo $className."::".$methodName." {\n";
			for($i=0;$i<count($methodArgs[0]);$i++)
			{
				if(isset($methodArgs[1][$i]))
					echo "\t".$methodArgs[0][$i]."\n";
				else
					echo "\t[".$methodArgs[0][$i]."]\n";
					
			}
			echo "}\n\n";
		}
	
	}
	ob_get_clean();

//merge non-implemented classes methods
if(isset($defIni['wxGenericTreeCtrl']))
	$defIni['wxGenericTreeCtrl']['_doNotImplement']=true;
if(isset($defIni['wxGenericListCtrl']))
	$defIni['wxGenericListCtrl']['_doNotImplement']=true;
if(isset($defIni['wxGenericImageList']))
        $defIni['wxGenericImageList']['_doNotImplement']=true;
if(isset($defIni['wxItemContainer']))
        $defIni['wxItemContainer']['_doNotImplement']=true;

$delCl = array();//classes to erase
foreach($defIni as $className => $classDef)
{
	if(isset($classDef['_doNotImplement']) && $classDef['_doNotImplement']==true)
	{
		foreach(derivationsOfClass($className) as $cl2 =>$cl2def)
		{
			if($cl2==$className || !isset($defIni[$cl2]))
				continue;
				
			$classDef2 = $defIni[$cl2];
			foreach($classDef as $meth => $methDef)
			{
				if($meth[0]=="_")
					continue;
				$found = false;
				foreach($classDef2 as $meth2 => $methDef2)
					if($meth2==$meth)
					{
						$found ==true;
						break;
					}
					
				if($found)//já existe método com o mesmo nome
				{
					$found2 = false;
					for($i=0;$i<count($defIni[$cl][$meth]);$i+=2)
					{
						$found2 = false;
						for($e=0;$e<count($defIni[$cl2][$meth]);$e+=2)
						{
							if($defIni[$cl][$meth][$i]==$defIni[$cl2][$meth][$e])// Agument types are equal
							{
								$found2 = true;
								break;
							}
							
							
						}
						if(!$found2)
						{
							$defIni[$cl2][$meth][] = $defIni[$cl][$meth][$i];
							$defIni[$cl2][$meth][] = $defIni[$cl][$meth][$i+1];
						}
					}
				}
				else
				{
					$defIni[$cl2][$meth] = $methDef;
				}
			}
		
		}
		$delCl[] = $className;
	}
}


foreach($delCl as $cl)
	unset($defIni[$cl]);

//overload merger
foreach($defIni as $className => $classDef)
{
	if(isset($classDef['_implements']))
	foreach($classDef['_implements'] as $implName)
        {
	        if(!isset($defIni[$implName]))
        	        continue;

		$implDef = $defIni[$implName];

		foreach($implDef as $implMeth => $implMethDef){

			if($implMeth[0]=="_")//jump internal structures
				continue;

			if($implMeth==$implName)//CONSTRUCTORS CANNOT BE OVERLOADED IN C++
				continue;
			
			$methName = $implMeth;
			if($implMeth==$implName)//because constructors
				$methName = $className;

			if(in_array($methName,array_keys($classDef))){//method with same name exists in this class
				//merge overloads
				$overloads = $classDef[$methName];
				for($i=0;$i<count($implMethDef);$i+=2){
					//iterate every base classe overload
					$found = false;
					for($e=0;$e<count($overloads);$e+=2)
						if($implMethDef[$i]==$overloads[$e])
							$found = true;
					if(!$found){
						$overloads[] = $implMethDef[$i];
						$overloads[] = $implMethDef[$i+1];
						//print_r($overloads);
						//print_r($implMethDef);
						//var_dump($methName);
						//var_dump($implMeth);
						//for($l=0;$l<count($overloads);$l+=2)
						//	var_dump(serialize($overloads[$l]));
						//var_dump(serialize($implMethDef[$i]));
						//die("aquii\n");
					}
				}
				if(count($implMethDef))
					$defIni[$className][$methName] = $overloads;
			}

		}
	}
}

function retWxOb($type,$poi){
	global $dynCasts;
	if(!in_array($type,$dynCasts))
		return "object_init_ex(return_value,php_{$type}_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert({$poi}, le_$type));return;";
	else
		return "{$type}_php* cret = wxDynamicCast($poi, {$type}_php);object_init_ex(return_value,php_{$type}_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert(cret, le_{$type}));MAKE_STD_ZVAL(cret->evnArray);array_init(cret->evnArray);return;";
}
	
//template.c
foreach($groups as $fileN => $classList)
{
	ob_start();
	$references = array("_files"=>array());
	foreach($classList as $className)
		$references[$className] = 1;
	foreach($classList as $className)
	{
		if(!isset($defIni[$className]))
			continue;
		$classDef = $defIni[$className];
	
		if(!isset($classDef['_type']) || $classDef['_type']!="abstract")
		{?>
void php_<?=$className?>_destruction_handler(zend_rsrc_list_entry *rsrc TSRMLS_DC) 
{
	<?
		/*delete (<?=$className?>*)rsrc->ptr; */
	?>
}			
<?		}

		//virtuals
		if(isset($classDef['_virtuals']))
		{
			foreach($classDef['_virtuals'] as $kVirtual => $vVirtual)
			{
?>
void* php_<?=$className?>::<?=$kVirtual?>()
{
}
<?
			}
		}

		foreach($classDef as $methodName => $methodArgs)
		{
			if($methodName[0]=="_")
				continue;
			
			if($methodName==$className)
				$methodName2 = "__construct";
			else
				$methodName2 = $methodName;
			
			/*if($methodName2=="GetPageCount")
			{
				ob_get_clean();
				var_dump($methodArgs);
				die();
			}*/

			// Force some implementations
			if($className=="wxEvtHandler" && $methodName=="Connect"){
?>

void <?=$className?>_php::onEvent(wxEvent& evnt)
{
	zval *arg[1];
	MAKE_STD_ZVAL(arg[0]);
	char _wxResource[] = "wxResource";
	TSRMLS_FETCH();

	if(0)
	{}
<?
	foreach(derivationsOfClass('wxEvent') as $kevn=>$vevn)
	{?>	
	else if(!tcscmp(evnt.GetClassInfo()->GetClassName(),wxT("<?=$kevn?>")))
	{
		object_init_ex(arg[0],php_<?=$kevn?>_entry);
		add_property_resource(arg[0], _wxResource, zend_list_insert(&evnt, le_<?=$kevn?>));
	}
<?
	}
?>

        char* wxname;
        zval dummy;
        zval* fc_name;
        wxCommandEvent* ce;
        wxPhpClientData* co;

        ce = (wxCommandEvent*)evnt.m_callbackUserData;
        co = (wxPhpClientData*)ce->GetClientObject();

        MAKE_STD_ZVAL(fc_name);
        wxname = (char*)ce->GetString().c_str();
        ZVAL_STRING(fc_name, wxname,1);

        if (call_user_function(NULL, &(co->phpObj), fc_name, &dummy, 1, arg TSRMLS_CC) == FAILURE) {
                wxMessageBox(_T("Failed method Call!\n"));
        }	
	
}
PHP_METHOD(php_<?=$className?>, Connect)
{
        zval **tmp;
        int rsrc_type;
        int id_to_find;
        int valid = 1;
        char _wxResource[] = "wxResource";
        wxEvtHandler *_this;

        if (zend_hash_find(Z_OBJPROP_P(getThis()), _wxResource, sizeof(_wxResource),  (void **)&tmp) == FAILURE)
                return;
        id_to_find = Z_RESVAL_P(*tmp);
        _this = (wxEvtHandler*)zend_list_find(id_to_find, &rsrc_type);

        zval* fc;
        int flag,id0 = 0,id1 = 0;

        zval** fc_obj;
        zval** fc_name;
        char* ct;
        int args;
        args = ZEND_NUM_ARGS();

        if(
                zend_parse_parameters_ex(ZEND_PARSE_PARAMS_QUIET, args TSRMLS_CC, "lllz", &id0, &id1, &flag , (void**)&fc) == SUCCESS   ||
                zend_parse_parameters_ex(ZEND_PARSE_PARAMS_QUIET, args TSRMLS_CC, "llz" , &id0, &flag , (void**)&fc) == SUCCESS ||
                zend_parse_parameters_ex(ZEND_PARSE_PARAMS_QUIET, args TSRMLS_CC, "lz"  , &flag , (void**)&fc) == SUCCESS
                )
        {
                zend_hash_index_find(HASH_OF(fc),0,(void**)&fc_obj);
                zend_hash_index_find(HASH_OF(fc),1,(void**)&fc_name);
                ZVAL_ADDREF(*fc_obj);


                ct = (*fc_name)->value.str.val;

                wxCommandEvent* ce = new wxCommandEvent();
                ce->SetString(wxString::Format(wxT("%s"),ct));
                ce->SetClientObject(new wxPhpClientData(*fc_obj));

                switch(args){
                        case 4:
                                _this->Connect(id0, id1, flag, wxEventHandler(<?=$className?>_php::onEvent),ce);
                                break;
                        case 3:
                                _this->Connect(id0, flag, wxEventHandler(<?=$className?>_php::onEvent),ce);
                                break;
                        case 2:
                                _this->Connect(flag, wxEventHandler(<?=$className?>_php::onEvent),ce);
                                break;
                        default:
                                wxMessageBox(_T("Failed to create event\n"));
                                break;
                }
        }
}
<?
				continue;
			}



			$argStr = array();
			$parseArgs = array();
			$callArgs = array();
			$objsArgs = array();
			$retVals = array();
			
			$hasOos = false;
			for($e=0;$e<count($methodArgs);$e+=2)
			{
				$types = array('l'=>0,'o'=>0,'s'=>0,'b'=>0,'a'=>0);
				$argStr[$e/2]="";
				$parseArgs[$e/2]= array();
				$callArgs[$e/2]= array();
				$objsArgs[$e/2]= array();
				$optionalArgs = false;
				
				switch($methodArgs[$e][0])
				{
					/*case	"const wxBitmap&":
						$retVals[$e/2] = "RETURN_RESOURCE(zend_list_insert(&ret".($e/2).", le_wxBitmap));";
						break;*/
					case "const wxDateTime&":
						$defIni[$className][$methodName][$e][0] = "wxDateTime";
						$retVals[$e/2] = "RETURN_LONG((long)ret".($e/2).".GetTicks())";
						break;
					case	"wxSize":
						$retVals[$e/2] =  "object_init_ex(return_value,php_wxSize_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert(&ret".($e/2).", le_wxSize));return;";
						break;
					case 	"wchar_t*":
						$defIni[$className][$methodName][$e][0] = "wxChar *";
						$retVals[$e/2] = "RETURN_STRING((char *)wxString(ret".($e/2).").c_str(),1)";
						break;
					case	"const wchar_t*":
						$defIni[$className][$methodName][$e][0] = "const wxChar *";
						$retVals[$e/2] = "RETURN_STRING((char *)wxString(ret".($e/2).").c_str(),1)";
						break;
					case	"const wxString&":
						$defIni[$className][$methodName][$e][0] = "wxString";
					case	"wxString":
						//$retVals[$e/2] = "char * ro2;ro2 = (char*)malloc(sizeof(char)*(ret".($e/2).".size()+1));strcpy ( ro2, (const char *) ret".($e/2).".char_str() );RETURN_STRING( ro2 ,1)";
						$retVals[$e/2] = "char * ro2;ro2 = (char*)malloc(sizeof(wxChar)*(ret".($e/2).".size()+1));strcpy ( ro2, (const char *) ret".($e/2).".char_str() );RETURN_STRING( ro2 ,1)";
						//$retVals[$e/2] = "RETURN_STRING((char *)ret".($e/2).".c_str(),1)";
						//$retVals[$e/2] = "RETURN_STRING((char *)ret".($e/2)."._str(wxConvUTF8),1)";
						break;
					case	"bool":
						$retVals[$e/2] = "RETURN_BOOL(ret".($e/2).")";
						break;
					case	"wxCalendarDateBorder":
					case	"unsigned int":
					case	"size_t":
					case	"long":
					case	"long int":
					case	"int":
						$retVals[$e/2] = "RETURN_LONG((long)ret".($e/2).")";
						break;
					case	"void":
						break;
					default:
						if(preg_match("/const[ ]+(.+?)[ ]*\&/",$methodArgs[$e][0],$matches))
						{
							$defIni[$className][$methodName][$e][0] = $matches[1];
							$retVals[$e/2] = retWxOb($matches[1],"&ret".($e/2)); //"object_init_ex(return_value,php_{$matches[1]}_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert(&ret".($e/2).", le_{$matches[1]}));return;";
						}
						elseif(preg_match("/(.+?)[ ]*\*/",$methodArgs[$e][0],$matches))
						{
							$defIni[$className][$methodName][$e][0] = $matches[1]."*";
							$retVals[$e/2] = retWxOb($matches[1],"ret".($e/2)); //"object_init_ex(return_value,php_{$matches[1]}_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert(ret".($e/2).", le_{$matches[1]}));return;";
						}
						elseif(isset($defIni[$methodArgs[$e][0]]))
						{
							$defIni[$className][$methodName][$e][0] = $methodArgs[$e][0];
							$retVals[$e/2] = "void* ptr = safe_emalloc(1,sizeof(".$methodArgs[$e][0]."),0);memcpy(ptr,&ret0,sizeof(".$methodArgs[$e][0]."));"."object_init_ex(return_value,php_{$methodArgs[$e][0]}_entry);add_property_resource(return_value, \"wxResource\", zend_list_insert(ptr, le_{$methodArgs[$e][0]}));return;";
						}
						break;
				}
				
				$argsProps = $methodArgs[$e+1];
				if(is_array($argsProps[0]))
					$argsProps= $argsProps[0];
					
				for($i=1;$i<count($methodArgs[$e]);$i++)
				{
					if(!isset($argsProps[$i]) && !$optionalArgs)
					{
						$optionalArgs = true;
						$argStr[$e/2].="|";
					}
					
					switch($methodArgs[$e][$i])
					{
						case "const wxDateTime&":
							$argStr[$e/2].="l";
							$parseArgs[$e/2][] = "&_argLong".$types['l'];
							$callArgs[$e/2][] = "wxDateTime(_argLong".$types['l'].")";
							$types['l']++;
							break;
						/*case "const wxString[]":
							$methodArgs[$e][$i] = "zval *";
							$argStr[$e/2].="a";
							$parseArgs[$e/2][] = "&_argArr".$types['s'];
							$callArgs[$e/2][] = "wxString(_argStr{$types['s']}, wxConvUTF8)";
							$types['a']++;
							break;*/
						case "const wxString*":
							$methodArgs[$e][$i] = "char *";
							$argStr[$e/2].="s";
							$parseArgs[$e/2][] = "&_argStr".$types['s'];
							$parseArgs[$e/2][] = "&_argStr".$types['s']."_len";
							$callArgs[$e/2][] = "&wxString(_argStr{$types['s']}, wxConvUTF8)";
							$types['s']++;
							break;
						case "const void*":
							$methodArgs[$e][$i] = "void *";
							$argStr[$e/2].="s";
							$parseArgs[$e/2][] = "&_argStr".$types['s'];
							$parseArgs[$e/2][] = "&_argStr".$types['s']."_len";
							$callArgs[$e/2][] = "&_argStr".$types['s'];
							$types['s']++;
							break;
                                                case "const wchar_t*":
                                                        $methodArgs[$e][$i] = "wchar_t *";
                                                        $argStr[$e/2].="s";
                                                        $parseArgs[$e/2][] = "&_argStr".$types['s'];
                                                        $parseArgs[$e/2][] = "&_argStr".$types['s']."_len";
                                                        $callArgs[$e/2][] = "wxString(_argStr{$types['s']}, wxConvUTF8)";
                                                        $types['s']++;
                                                        break;
						case "const wxString&":
							$methodArgs[$e][$i] = "char *";
							$argStr[$e/2].="s";
							$parseArgs[$e/2][] = "&_argStr".$types['s'];
							$parseArgs[$e/2][] = "&_argStr".$types['s']."_len";
							$callArgs[$e/2][] = "wxString(_argStr{$types['s']}, wxConvUTF8)";
							$types['s']++;
							break;
						case "bool":
						case "const bool":
							$argStr[$e/2].="b";
							$parseArgs[$e/2][] = "&_argBool".$types['b'];
							$callArgs[$e/2][] = "_argBool".$types['b'];
							$types['b']++;
							break;
						case "wxBitmapType":
							$classDef[$methodName][$e][$i] = "long";
						case "wxCalendarDateBorder":
						case "wxDataViewCellMode":
						case "wxItemKind":
							$argStr[$e/2].="l";
							$parseArgs[$e/2][] = "&_argLong".$types['l'];
							$callArgs[$e/2][] = "(".$methodArgs[$e][$i].") _argLong".$types['l'];
							$types['l']++;
							break;
						case "size_t":
						case "long unsigned int":
						case "unsigned int":
						case "long int":
						case "void**":
						case "int":
                                                case "double":
						case "long":
							$argStr[$e/2].="l";
							$parseArgs[$e/2][] = "&_argLong".$types['l'];
							$callArgs[$e/2][] = "(".$methodArgs[$e][$i].")_argLong".$types['l'];
							$types['l']++;
							break;
						case "long*":
							$argStr[$e/2].="l";
							$parseArgs[$e/2][] = "&_argLong".$types['l'];
							$callArgs[$e/2][] = "&_argLong".$types['l'];
							$types['l']++;
							break;
						default:
							$argStr[$e/2].="z";
							$parseArgs[$e/2][] = "&_argObj".$types['o'];
							if(preg_match("/const[ ]+([^\*]+)\*/",$methodArgs[$e][$i],$maches))
							{
								$objsArgs[$e/2][$types['o']] = $maches[1];
								$callArgs[$e/2][] = "(".$maches[1]."*) _ptrObj".$types['o'];
							}
							elseif(preg_match("/([^\*]+)\*/",$methodArgs[$e][$i],$maches))
							{
								$objsArgs[$e/2][$types['o']] = $maches[1];
								$callArgs[$e/2][] = "(".$maches[1]."*) _ptrObj".$types['o'];
							}
							elseif(preg_match("/const[ ]+([^\&]+)\&/",$methodArgs[$e][$i],$maches))
							{
								$objsArgs[$e/2][$types['o']] = $maches[1];
								$callArgs[$e/2][] = "*(".$maches[1]." *) _ptrObj".$types['o'];
							}
							elseif(preg_match("/([^\&]+)\&/",$methodArgs[$e][$i],$maches))
							{
								$objsArgs[$e/2][$types['o']] = $maches[1];
								$callArgs[$e/2][] = "*(".$maches[1]." *) _ptrObj".$types['o'];
							}
							else
							{
								ob_get_clean();
								var_dump($methodName);
								var_dump($className);
								die("cant match ".$methodArgs[$e][$i]);
							}
							$mtype = $objsArgs[$e/2][$types['o']];
							$types['o']++;
							$hasOos = true;
							//incluir todas as derivaçoes
							// Uma classe que não tenha métodos não tem ficheiro
							$needrefs = derivationsOfClass($mtype);
							//if(isset($defIni[$mtype]['_baseFor']))
							{
								foreach($needrefs as $clsN => $val1 )
									foreach($groups as $kN2 => $vA2 )
										if(in_array($clsN,$vA2))
										{
											$references["_files"][$kN2]=1;
											$references[$clsN] =1;
										}
								
							}
							foreach($groups as $kN => $vA )//autoreferencia
							{
								if(in_array($mtype,$vA))
								{
									$references["_files"][$kN] = 1;
									$references[$mtype]=1;
									break;
								}
							}
							break;
					}
					
					
					//if($argsProps[$i]==4)
						$argStr[$e/2].="!";
						
					
				}
				$parseArgs[$e/2] = join(" , ",$parseArgs[$e/2]);
			}
			
			if(isset($classDef['_pure_virtual']) && in_array($methodName,$classDef['_pure_virtual']))
			{
				if(isset($classDef['_const']) && in_array($methodName,$classDef['_const']))
					$const = " const";
				else
					$const = "";
			
				$args=$methodArgs[0];
				$retType = $args[0];
				array_splice($args,0,1);
				$argos = $args;
				foreach($args as $k => $v)
					$args[$k] = $v." arg".$k;
					
				$args = join(" , ",$args);
					?>
<?=$retType ?> <?=$className?>_php::<?=$methodName?>(<?=$args?>)<?=$const?>
{
	zval *args[<?=count($argos)?>];
	zval retval, funcname;
	ZVAL_STRING(&funcname, "<?=$methodName?>", 0);
	
	<?
		foreach($argos as $arK => $arV){
	?>
	zval argLng<?=$arK?>;
	ZVAL_LONG(&argLng<?=$arK?>,arg<?=$arK?>);
	args[<?=$arK?>]= &argLng<?=$arK?>;
	<?
		}
	?>
	
	if (call_user_function(NULL, (zval**) &this->phpObj, &funcname, &retval, <?=count($argos)?>, args TSRMLS_CC) == FAILURE) {
		wxMessageBox(_T("Failed method Call!\n"));
	}
	else
		<?
		if($retType=="wxString")
			echo "return wxString(retval.value.str.val,wxConvUTF8);";
		elseif($retType=="bool")
			echo "return Z_BVAL(retval);";
		else
			die("unKnown type: ".$retType);
	?>
}
<?				
			}
			
			
			?>PHP_METHOD(php_<?=$className?>, <?=$methodName2?>)
{
<?
			if($methodName!=$className || $hasOos)
			{
?>
	zval **tmp;
	int rsrc_type;
<?			}
			if($methodName!=$className)
			{
?>
	int id_to_find;
<?			}?>
	char _wxResource[] = "wxResource";
	int valid = 1;
	void *_this;
<?
			if($methodName!=$className)
			{
?>	
	if (zend_hash_find(Z_OBJPROP_P(getThis()), _wxResource, sizeof(_wxResource),  (void **)&tmp) == FAILURE) 
	{
		return;
	}
	id_to_find = Z_RESVAL_P(*tmp);
	_this = zend_list_find(id_to_find, &rsrc_type);
	
<?
			}
			
			/*$lastMax=0;
			for($e=0;$e<count($argStr);$e++)
				if(($i = preg_match_all("/a/",$argStr[$e],$matches))>$lastMax)
					$lastMax = $i;
			for($i=0;$i<$lastMax;$i++)
			{
			?>
	zval* _argArr<?=$i?>;
<?
			}*/
			$lastMax=0;
			for($e=0;$e<count($argStr);$e++)
				if(($i = preg_match_all("/b/",$argStr[$e],$matches))>$lastMax)
					$lastMax = $i;
			for($i=0;$i<$lastMax;$i++)
			{
			?>
	bool _argBool<?=$i?>;
<?
			}
			$lastMax=0;
			for($e=0;$e<count($argStr);$e++)
				if(($i = preg_match_all("/l/",$argStr[$e],$matches))>$lastMax)
					$lastMax = $i;
			for($i=0;$i<$lastMax;$i++)
			{
			?>
	long _argLong<?=$i?>;
<?
			}
			$lastMax=0;
			for($e=0;$e<count($argStr);$e++)
				if(($i = preg_match_all("/s/",$argStr[$e],$matches))>$lastMax)
					$lastMax = $i;
			for($i=0;$i<$lastMax;$i++)
			{
			?>
	char* _argStr<?=$i?>;
	int _argStr<?=$i?>_len;
<?
			}
			$lastMax=0;
			for($e=0;$e<count($argStr);$e++)
				if(($i = preg_match_all("/z/",$argStr[$e],$matches))>$lastMax)
					$lastMax = $i;
			for($i=0;$i<$lastMax;$i++)
			{
			?>
	void *_ptrObj<?=$i?> = 0;
	zval *_argObj<?=$i?> = 0;
	int id_to_find<?=$i?>;
<?
			}
			foreach($argStr as $k => $strArg)
			{
				if($strArg!="")
				{
			?>
	valid=1;
	if (zend_parse_parameters_ex(ZEND_PARSE_PARAMS_QUIET, ZEND_NUM_ARGS() TSRMLS_CC, "<?=$strArg?>", <?=$parseArgs[$k]?> ) == SUCCESS)
	{
		
<?				}
				else
				{
			?>
	valid=1;
	if (ZEND_NUM_ARGS()==0)
	{
		
<?				}
				
			preg_match("/[^\|]*/",$strArg,$matches);
			for($i=0;$i<preg_match_all("/z/",$matches[0],$matchis);$i++)
			{
				$myType = $objsArgs[$k][$i];
				$typeVerifier = derivationsOfClass($myType);
				$typeVerifierStr = array();
				foreach($typeVerifier as $k2 => $v)
					$typeVerifierStr[] = "rsrc_type != le_".$k2;
				
				$typeVerifierStr = join(" && ",$typeVerifierStr);
			
			?>
		if(_argObj<?=$i?>)
		if (valid) 
		{
			if(_argObj<?=$i?>->type==IS_OBJECT && zend_hash_find(Z_OBJPROP_P(_argObj<?=$i?>), _wxResource , sizeof(_wxResource),  (void **)&tmp) == SUCCESS)
			{
				id_to_find<?=$i?> = Z_RESVAL_P(*tmp);
				_ptrObj<?=$i?> = zend_list_find(id_to_find<?=$i?>, &rsrc_type);
				if (!_ptrObj<?=$i?> || (<?=$typeVerifierStr?>))
					valid = 0;
			}
			else if(_argObj<?=$i?>->type==IS_LONG)
				_ptrObj<?=$i?>= (void *)_argObj<?=$i?>->value.lval;
			else if(_argObj<?=$i?>->type!=IS_NULL)
				valid = 0;
		}
		else
			valid = 0;
<?
			}
			$L = $i;
			$l = preg_match_all("/l|a|b|z|s/",$matches[0],$matchis);
			
			preg_match("/(?:\|)[^\n]+/",$strArg,$matches);
			for($i=0;$i<preg_match_all("/z/",$matches[0],$matchis);$i++)
			{
				$myType = $objsArgs[$k][$L+$i];
				$typeVerifier = derivationsOfClass($myType);
				$typeVerifierStr = array();
				foreach($typeVerifier as $k2 => $v)
					$typeVerifierStr[] = "rsrc_type != le_".$k2;
				
				$typeVerifierStr = join(" && ",$typeVerifierStr);
			?>
		if(valid && _argObj<?=$L+$i?>)
		{
			if (_argObj<?=$L+$i?>->type==IS_OBJECT && zend_hash_find(Z_OBJPROP_P(_argObj<?=$L+$i?>), _wxResource , sizeof(_wxResource),  (void **)&tmp) == SUCCESS) 
			{
				id_to_find<?=$L+$i?> = Z_RESVAL_P(*tmp);
				_ptrObj<?=$L+$i?> = zend_list_find(id_to_find<?=$L+$i?>, &rsrc_type);
				if (!_ptrObj<?=$L+$i?> || (<?=$typeVerifierStr?>))
					valid = 0;
			}
			else if(_argObj<?=$L+$i?>->type==IS_LONG)
				_ptrObj<?=$L+$i?>= (void *)_argObj<?=$L+$i?>->value.lval;
		}
<?
			}
		?>
		if(valid)
		{
<?
			if(isset($retVals[$k]))
			{?>
			<?=$defIni[$className][$methodName][$k*2][0]?> ret<?=$k?>;
<?			}
			$g = preg_match_all("/l|a|z|b|s/",$strArg,$matches);
			//verify foreach argument, if resource
			$idf = 0;
			for($i=0;$i<$g;$i++)
			{
				if($matches[0][$i]=='z')
				{
					$argsProps = $defIni[$className][$methodName][$k*2+1];
					if(is_array($argsProps[0]))
						$argsProps= $argsProps[0];
					if($argsProps[$i+1]=="2")
					{
				?>
			zend_list_addref(id_to_find<?=$idf?>);
<?					}
					$idf++;
				}
			}
				
			?>
			int gr = ZEND_NUM_ARGS(); 
			switch(gr)
			{
<?
				for($i=$g;$i>=$l;$i--)
				{
					array_splice($callArgs[$k],$i);
					if($methodName!=$className)
					{
				?>
				case <?=$i?>:
					<? if(isset($retVals[$k])){?>ret<?=$k?> = <? }?> ((<?=$className?><?if($defIni[$className]['_type']!="abstract"){?>_php<?}?>*)_this)-><?=$methodName?>(<?=join(" , ",$callArgs[$k])?>);
					break;
<?					}
					else
					{
				?>
				case <?=$i?>:
					_this = new <?=$className?>_php(<?=join(" , ",$callArgs[$k])?>);
					break;
<?					}
				}
		?>
				default:
					break;
			}
<?
				if($methodName==$className)
				{?>
			long id_to_find = zend_list_insert(_this, le_<?=$className?>);
			add_property_resource(getThis(), _wxResource, id_to_find);					
<?
					$argsProps = $defIni[$className][$methodName][$k*2+1];
					if(is_array($argsProps[0]))
						$argsProps= $argsProps[0];
					if($argsProps[0]=="2")
					{?>
			zend_list_addref(id_to_find);
<?				
					}
?>
			MAKE_STD_ZVAL(((<?=$className?>_php*) _this)->evnArray);
			array_init(((<?=$className?>_php*) _this)->evnArray);
			MAKE_STD_ZVAL(((<?=$className?>_php*) _this)->phpObj);
			*((<?=$className?>_php*) _this)->phpObj = *getThis();
			zval_copy_ctor(((<?=$className?>_php*) _this)->phpObj);
			#ifdef ZTS 
			((<?=$className?>_php*) _this)->TSRMLS_C = TSRMLS_C;
			#endif
<?				}
				
			if(isset($retVals[$k]))
			{?>
			<?=$retVals[$k]?>
<?			}
				
				
?>			
		}
<?			//if($strArg!="")
			{?>
	}
<?			}
			
		}
?>
}
<?
		}
	}
	$data = ob_get_clean();
	$headers ="";

	//$data = "#include \"$fileN.h\"\n".$data;
	$references["_files"] = array_keys($references["_files"]);
	$includes = array();
	foreach($references["_files"] as $fl)
	{
		$includes[] = $fl;
		$headers.= "#include \"$fl.h\"\n";
	}

	if(!in_array($fileN,$includes))
		$headers.= "#include \"$fileN.h\"\n";

	$data = "#include \"php_wxwidgets.h\"\n".$headers.$data;
	
	$hd = fopen($fileN.".cpp","w");
	fwrite($hd,$data);
	fclose($hd);
	
	//template.h
	ob_start();
	foreach($classList as $className)
		$references[$className] = 1;
	foreach($classList as $className)
	{
		if(!isset($defIni[$className]))
			continue;
		$classDef = $defIni[$className];

		if($classDef	["_type"]=="abstract")
			continue;
		?>
extern zend_class_entry *php_<?=$className?>_entry;
void php_<?=$className?>_destruction_handler(zend_rsrc_list_entry * TSRMLS_DC);

#define PHP_<?=$className?>_NAME "<?=$className?>"
#define le_<?=$className?>_name  "native <?=$className?>"

class <?=$className?>_php : public <?=$className?>
{
	public:
<?
	foreach($classDef as $fcName => $fc)
	{
		if($fcName!=$className)
			continue;
		for($ol=0;$ol<count($fc);$ol+=2)
		{
			$args = $fc[$ol];
			$argsDefault = $fc[$ol+1];
			if(is_array($argsDefault[0]))
				$argsDefault= $argsDefault[1];
			else
				$argsDefault = array();
			
			
			array_splice($args,0,1);
			$argC = array();
			foreach($args as $k => $v)
			{
				$args[$k] = $v." arg".$k;
				$argC[$k] = "arg".$k;
				
				if(!is_null($argsDefault[$k+1]))
				{
					//escapar do erro
					if($argsDefault[$k+1][0]=='"')
						$argsDefault[$k+1]="wxT({$argsDefault[$k+1]})";
					$args[$k].=" = ".$argsDefault[$k+1];
				}
			}
			
			$args = join(" , ",$args);
			$argC = join(" , ",$argC);
			
		
	?>
	<?=$className?>_php(<?=$args?>):<?=$className?>(<?=$argC?>)
	{
	}
<?		}
	}
	
		if(isset($classDef['_pure_virtual']))
		{
			$evnCnt=0;
			foreach($classDef['_pure_virtual'] as $fVirtual)
			{
				if(!isset($classDef[$fVirtual]))
					continue;
				
				$fc = $classDef[$fVirtual];
				
				if(isset($classDef['_const']) && in_array($fVirtual,$classDef['_const']))
					$const = " const";
				else
					$const = "";
					
				$args=$fc[0];
				$retType = $args[0];
				array_splice($args,0,1);
				foreach($args as $k => $v)
					$args[$k] = $v." arg".$k;
					
				$args = join(" , ",$args);
					?>
		virtual <?=$retType ?> <?=$fVirtual?>(<?=$args?>)<?=$const?>;
<?			}

		}

?>
	zval *evnArray;
	void onEvent(wxEvent& evnt);
	void ***tsrm_ls;
	zval* phpObj;
};


extern int le_<?=$className?>;

static function_entry php_<?=$className?>_functions[] = {
<?
		funcsOfClass($className,1);
?>
	{ NULL, NULL, NULL }
};
<?
	}
	$data = ob_get_clean();
	
	$hd = fopen($fileN.".h","w");
	fwrite($hd,$data);
	fclose($hd);
	
	
}

	//wxwidgets.c
	
	ob_start();
	
	foreach($groups as $k => $v)
	{?>
#include "<?=$k?>.h"
<?	
	}
	
	
	foreach($defIni as $className => $classDef)
	{
		if(!isset($classDef['_type']) && $classDef['_type']=="abstract")
			continue;
		
?>
zend_class_entry *php_<?=$className?>_entry;
int le_<?=$className?>;
<?
	}
	$data = ob_get_clean();	
	
	
	ob_start();
	foreach($defIni as $className => $classDef)
	{
		if(isset($classDef['_type']) && $classDef['_type']=="abstract")
			continue;
		
?>
	INIT_CLASS_ENTRY(cf, PHP_<?=$className?>_NAME , php_<?=$className?>_functions);
	php_<?=$className?>_entry = zend_register_internal_class(&cf TSRMLS_CC);
	le_<?=$className?> = zend_register_list_destructors_ex(php_<?=$className?>_destruction_handler,NULL, le_<?=$className?>_name ,module_number);

<?
			/*if(isset($evnHandlers[$className])
			{

				$evnCnt=0;
				foreach($classDef['_events'] as $event => $evnVal)
				{
					if(isset($defConsts[$event]))
						continue;
					$defConsts[$event] = $event;
					?>
	REGISTER_LONG_CONSTANT("<?=$event?>",	<?=$event?>	, CONST_CS |CONST_PERSISTENT);					
<?				}
			}*/
	}
	foreach($defConsts as $kConst => $vConst)
	{
		if($vConst!=1)
			continue;
?>
	REGISTER_LONG_CONSTANT("<?=$kConst?>",	<?=$kConst?>	, CONST_CS |CONST_PERSISTENT);
<?	
	}
	
	$data2 = ob_get_clean();	
	
	

	$old = file_get_contents("wxwidgets.cpp");
	if(preg_match("/(.*?\/\/ entries --->).+?(\/\/ <--- entries[^§]+)/sm",$old,$matches))
	{
		$data = $matches[1]."\n".$data."\n".$matches[2];

		if($res =preg_match("/(.*?\/\/ cast --->)[^<]+(\/\/ <--- cast[^§]+)/sm",$data,$matches)){
			ob_start();
?>
PHP_FUNCTION(php_wxDynamicCast){
        zval **tmp;
        int rsrc_type;
        char _wxResource[] = "wxResource";
        int valid = 1;

        char* _argStr0;
        int _argStr0_len;
        void *_ptrObj0 = 0;
        zval *_argObj0 = 0;
        int id_to_find0;


        if (zend_parse_parameters_ex(ZEND_PARSE_PARAMS_QUIET, ZEND_NUM_ARGS() TSRMLS_CC, "z!s!",  &_argObj0 , &_argStr0 , &_argStr0_len ) == SUCCESS){

                if(_argObj0)
                {
                        if(_argObj0->type==IS_OBJECT && zend_hash_find(Z_OBJPROP_P(_argObj0), _wxResource , sizeof(_wxResource),  (void **)&tmp) == SUCCESS)
                        {
                                id_to_find0 = Z_RESVAL_P(*tmp);
                                _ptrObj0 = zend_list_find(id_to_find0, &rsrc_type);
                                //if (!_ptrObj0 || rsrc_type != le_wxTextCtrl)
                                //      valid = 0;
                        }
                }

                if(valid){
			if(0){
			}
<?			foreach($defIni as $className => $classDef):
				if(!isset($classDef['_type']) && $classDef['_type']=="abstract")
		                        continue;
				if(in_array($className,array("wxPoint","wxSize","wxSizerFlags","wxClassInfo","wxTreeItemData","wxTreeItemId","wxArrayString","wxRect","wxDateTime","wxCalendarDateAttr","wxLocale","wxItemContainer")))
					continue;
?>
                        else if(!strcmp(_argStr0,"<?=$className?>")){
                                object_init_ex(return_value,php_<?=$className?>_entry);
                                <?=$className?>* ret = wxDynamicCast(_ptrObj0,<?=$className?>_php);
                                long id_to_find = zend_list_insert(ret, le_<?=$className?>);
                                add_property_resource(return_value, _wxResource, id_to_find);
                                return;
                        }
<?			endforeach;?>
                }

        }

}
<?
			$data = $matches[1]."\n".ob_get_clean()."\n".$matches[2];
		}

		
		if($res =preg_match("/(.*?\/\/ classes --->)[^<]+(\/\/ <--- classes[^§]+)/sm",$data,$matches))
		{
			$data = $matches[1]."\n".$data2."\n".$matches[2];
		
			$hd = fopen("wxwidgets.cpp","w");
			fwrite($hd,$data);
			fclose($hd);
		}
	}



	ob_start();
	foreach($defIni as $className => $classDef)
	{
		foreach($classDef as $fcName => $fc)
		{
			if($fcName[0]=="_")
				continue;
			$fcName2 =$fcName;
			if($fcName==$className)
				$fcName = "__construct";

?>
PHP_METHOD(php_<?=$className?>, <?=$fcName?>);
<?
		}
		if(isset($evnHandlers[$className]))
		{
?>
PHP_METHOD(php_<?=$className?>, Connect);
<?
		}
		
	}
	$data = ob_get_flush();	

	$old = file_get_contents("php_wxwidgets.h");
	if(preg_match("/(.*?\/\/ entries --->).+?(\/\/ <--- entries[^§]+)/sm",$old,$matches))
	{
		$data = $matches[1]."\n".$data."\n".$matches[2];
		
		$hd = fopen("php_wxwidgets.h","w");
		fwrite($hd,$data);
		fclose($hd);
	}

	die();

		?>
